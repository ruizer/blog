(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{359:function(n,s,a){n.exports=a.p+"assets/img/this.ff08b844.png"},381:function(n,s,a){"use strict";a.r(s);var t=a(42),e=Object(t.a)({},(function(){var n=this,s=n.$createElement,t=n._self._c||s;return t("ContentSlotsDistributor",{attrs:{"slot-key":n.$parent.slotKey}},[t("h1",{attrs:{id:"javascript相关知识点集锦-四-this-、箭头函数、以及apply、call与bind"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#javascript相关知识点集锦-四-this-、箭头函数、以及apply、call与bind"}},[n._v("#")]),n._v(" JavaScript相关知识点集锦(四)：this 、箭头函数、以及apply、call与bind")]),n._v(" "),t("blockquote",[t("p",[n._v("本文分为两部分：")]),n._v(" "),t("ul",[t("li",[n._v("正确判断 "),t("code",[n._v("this")])]),n._v(" "),t("li",[n._v("手写 "),t("code",[n._v("apply")]),n._v("、"),t("code",[n._v("call")]),n._v("、"),t("code",[n._v("bind")])])])]),n._v(" "),t("h2",{attrs:{id:"正确判断-this"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#正确判断-this"}},[n._v("#")]),n._v(" 正确判断 "),t("code",[n._v("this")])]),n._v(" "),t("p",[t("code",[n._v("this")]),n._v(" 是个容易让人混淆的概念，但只要我们理清了思路就会很容易理解。")]),n._v(" "),t("p",[n._v("对于单个规则来说，我们可以按照下面的流程来进行判断：\n")]),n._v(" "),t("ul",[t("li",[n._v("首先，判断函数类型\n"),t("ul",[t("li",[n._v("若是箭头函数，"),t("code",[n._v("this")]),n._v(" 就是包裹箭头函数的第一个普通函数的 "),t("code",[n._v("this")])]),n._v(" "),t("li",[n._v("若是"),t("code",[n._v("apply")]),n._v("、"),t("code",[n._v("call")]),n._v("、"),t("code",[n._v("bind")]),n._v("，"),t("code",[n._v("this")]),n._v(" 是第一个参数")]),n._v(" "),t("li",[n._v("普通函数的话，要判断函数是如何被调用的\n"),t("ul",[t("li",[t("code",[n._v("new")]),n._v(" 的方式，"),t("code",[n._v("this")]),n._v(" 被固化在实例上面")]),n._v(" "),t("li",[n._v("除了 "),t("code",[n._v("new")]),n._v(" 方式以外，判断函数是直接调用（ "),t("code",[n._v("foo()")]),n._v(" ）还是通过对象调用 （ "),t("code",[n._v("obj.foo()")]),n._v(" ）\n"),t("ul",[t("li",[t("code",[n._v("foo()")]),n._v(" 方式，"),t("code",[n._v("this")]),n._v(" 为 "),t("code",[n._v("window")])]),n._v(" "),t("li",[t("code",[n._v("obj.foo()")]),n._v(" 方式，"),t("code",[n._v("this")]),n._v(" 为 "),t("code",[n._v("obj")])])])])])])])])]),n._v(" "),t("p",[t("img",{attrs:{src:a(359),alt:"image"}})]),n._v(" "),t("p",[n._v("通过这个流程，我们可以准确判断 "),t("code",[n._v("this")]),n._v("。当然，如果我们向改变 "),t("code",[n._v("this")]),n._v("，就可以采用以下方式：")]),n._v(" "),t("ol",[t("li",[n._v("使用箭头函数")]),n._v(" "),t("li",[n._v("使用 "),t("code",[n._v("apply")]),n._v("、"),t("code",[n._v("call")]),n._v("、"),t("code",[n._v("bind")]),n._v(" 方法")]),n._v(" "),t("li",[n._v("当然，构造函数也可以改变 "),t("code",[n._v("this")]),n._v("，通过对象调用也行")])]),n._v(" "),t("h2",{attrs:{id:"手写-apply、call、bind"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#手写-apply、call、bind"}},[n._v("#")]),n._v(" 手写 "),t("code",[n._v("apply")]),n._v("、"),t("code",[n._v("call")]),n._v("、"),t("code",[n._v("bind")])]),n._v(" "),t("p",[n._v("关于 "),t("code",[n._v("apply")]),n._v("、"),t("code",[n._v("call")]),n._v("、"),t("code",[n._v("bind")]),n._v("，都可以改变 "),t("code",[n._v("this")]),n._v(" 的指向，但稍稍有些不同。")]),n._v(" "),t("ol",[t("li",[t("code",[n._v("apply")]),n._v(" 和 "),t("code",[n._v("call")]),n._v(" 的区别\n其实 "),t("code",[n._v("apply")]),n._v(" 和 "),t("code",[n._v("call")]),n._v(" 基本类似，他们的区别主要是传参不同\n"),t("blockquote",[t("p",[t("code",[n._v("call")]),n._v(" 的语法：\nfun.call(thisArg[, arg1[, arg2[, ...]]])\n"),t("code",[n._v("apply")]),n._v(" 的语法：\nfun.apply(thisArg, [argsArray])\n所以 "),t("code",[n._v("apply")]),n._v(" 和 "),t("code",[n._v("call")]),n._v(" 的区别是 "),t("code",[n._v("call")]),n._v(" 方法接受的是若干个参数列表，而 "),t("code",[n._v("apply")]),n._v(" 接收的是一个包含多个参数的数组。")])])]),n._v(" "),t("li",[t("code",[n._v("bind")]),n._v(" 和 "),t("code",[n._v("apply")]),n._v("、"),t("code",[n._v("call")]),n._v(" 区别\n"),t("blockquote",[t("p",[n._v("bind()方法创建一个新的函数, 当被调用时，将其this关键字设置为提供的值，在调用新函数时，在任何提供之前提供一个给定的参数序列。\n从这句话，我们可以看出，"),t("code",[n._v("bind")]),n._v(" 是创建一个新的函数，需要我们手动去执行。\n这是 "),t("code",[n._v("bind")]),n._v(" 与 "),t("code",[n._v("apply")]),n._v(" 、"),t("code",[n._v("call")]),n._v(" 的主要区别。")])])]),n._v(" "),t("li",[n._v("手写 "),t("code",[n._v("apply")]),n._v("、"),t("code",[n._v("call")]),n._v("、"),t("code",[n._v("bind")])])]),n._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[n._v("    Function.prototype.myCall = function(context) {\n    if (typeof this !== 'function') {\n        throw new TypeError('Error')\n    }\n    context = context || window\n    context.fn = this\n    const args = [...arguments].slice(1)\n    const result = context.fn(...args)\n    delete context.fn\n    return result\n}\n\nFunction.prototype.myApply = function(context) {\n    if (typeof this !== 'function') {\n        throw new TypeError('Error')\n    }\n    context = context || window\n    context.fn = this\n    let result\n    if (arguments[1]) {\n        result = context.fn(...arguments[1])\n    } else {\n        result = context.fn()\n    }\n    return result\n}\n\nFunction.prototype.myBind = function(context) {\n    if (typeof this !== 'function') {\n        throw new TypeError('Error')\n    }\n    const _this = this\n    const args = [...arguments].slice(1)\n\n    return function F() {\n        if (this instanceof F) {\n            return new _this(...args, ...arguments)\n        }\n        return _this.apply(context, args.concat(...arguments))\n    }\n}\n\nvar obj = {\n    name: '这是'\n}\n\nfunction printName (fname, lname) {\n    console.log(this)\n    console.log(`${this.name} ${fname}${lname}`)\n}\n\nprintName('liao', 'rui')\nprintName.myCall(obj, 'liao', 'rui')\nprintName.myApply(obj, ['liao', 'rui'])\nprintName.myBind(obj, 'liao', 'rui')()\n\n")])]),n._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[n._v("1")]),t("br"),t("span",{staticClass:"line-number"},[n._v("2")]),t("br"),t("span",{staticClass:"line-number"},[n._v("3")]),t("br"),t("span",{staticClass:"line-number"},[n._v("4")]),t("br"),t("span",{staticClass:"line-number"},[n._v("5")]),t("br"),t("span",{staticClass:"line-number"},[n._v("6")]),t("br"),t("span",{staticClass:"line-number"},[n._v("7")]),t("br"),t("span",{staticClass:"line-number"},[n._v("8")]),t("br"),t("span",{staticClass:"line-number"},[n._v("9")]),t("br"),t("span",{staticClass:"line-number"},[n._v("10")]),t("br"),t("span",{staticClass:"line-number"},[n._v("11")]),t("br"),t("span",{staticClass:"line-number"},[n._v("12")]),t("br"),t("span",{staticClass:"line-number"},[n._v("13")]),t("br"),t("span",{staticClass:"line-number"},[n._v("14")]),t("br"),t("span",{staticClass:"line-number"},[n._v("15")]),t("br"),t("span",{staticClass:"line-number"},[n._v("16")]),t("br"),t("span",{staticClass:"line-number"},[n._v("17")]),t("br"),t("span",{staticClass:"line-number"},[n._v("18")]),t("br"),t("span",{staticClass:"line-number"},[n._v("19")]),t("br"),t("span",{staticClass:"line-number"},[n._v("20")]),t("br"),t("span",{staticClass:"line-number"},[n._v("21")]),t("br"),t("span",{staticClass:"line-number"},[n._v("22")]),t("br"),t("span",{staticClass:"line-number"},[n._v("23")]),t("br"),t("span",{staticClass:"line-number"},[n._v("24")]),t("br"),t("span",{staticClass:"line-number"},[n._v("25")]),t("br"),t("span",{staticClass:"line-number"},[n._v("26")]),t("br"),t("span",{staticClass:"line-number"},[n._v("27")]),t("br"),t("span",{staticClass:"line-number"},[n._v("28")]),t("br"),t("span",{staticClass:"line-number"},[n._v("29")]),t("br"),t("span",{staticClass:"line-number"},[n._v("30")]),t("br"),t("span",{staticClass:"line-number"},[n._v("31")]),t("br"),t("span",{staticClass:"line-number"},[n._v("32")]),t("br"),t("span",{staticClass:"line-number"},[n._v("33")]),t("br"),t("span",{staticClass:"line-number"},[n._v("34")]),t("br"),t("span",{staticClass:"line-number"},[n._v("35")]),t("br"),t("span",{staticClass:"line-number"},[n._v("36")]),t("br"),t("span",{staticClass:"line-number"},[n._v("37")]),t("br"),t("span",{staticClass:"line-number"},[n._v("38")]),t("br"),t("span",{staticClass:"line-number"},[n._v("39")]),t("br"),t("span",{staticClass:"line-number"},[n._v("40")]),t("br"),t("span",{staticClass:"line-number"},[n._v("41")]),t("br"),t("span",{staticClass:"line-number"},[n._v("42")]),t("br"),t("span",{staticClass:"line-number"},[n._v("43")]),t("br"),t("span",{staticClass:"line-number"},[n._v("44")]),t("br"),t("span",{staticClass:"line-number"},[n._v("45")]),t("br"),t("span",{staticClass:"line-number"},[n._v("46")]),t("br"),t("span",{staticClass:"line-number"},[n._v("47")]),t("br"),t("span",{staticClass:"line-number"},[n._v("48")]),t("br"),t("span",{staticClass:"line-number"},[n._v("49")]),t("br"),t("span",{staticClass:"line-number"},[n._v("50")]),t("br"),t("span",{staticClass:"line-number"},[n._v("51")]),t("br"),t("span",{staticClass:"line-number"},[n._v("52")]),t("br"),t("span",{staticClass:"line-number"},[n._v("53")]),t("br"),t("span",{staticClass:"line-number"},[n._v("54")]),t("br"),t("span",{staticClass:"line-number"},[n._v("55")]),t("br"),t("span",{staticClass:"line-number"},[n._v("56")]),t("br")])]),t("p",[n._v("本文完， 感谢阅读。")])])}),[],!1,null,null,null);s.default=e.exports}}]);